{% extends "base.html" %}
{% block content %}
<h2>Prediction Result</h2>
<p><strong>Class:</strong> {{ label }}</p>
<p><strong>Confidence:</strong> {{ confidence | round(2) }}</p>

<div class="row">
    <div class="col-md-6">
        <h4>Original Image</h4>
        <img src="{{ url_for('static', filename='./uploads/' ~ filename) }}" width="300" class="img-thumbnail">
    </div>
    <div class="col-md-6">
        <h4>Grad-CAM Explanation</h4>
        <p>Areas in red indicate where the model focused when making its prediction.</p>
        <img src="{{ url_for('static', filename='./uploads/' ~ grad_cam_filename) }}" width="300" class="img-thumbnail">
    </div>
</div>

{% if treatment_info %}
<div class="mt-4">
    <h3>{{ treatment_info.title }}</h3>
    <p>{{ treatment_info.overview }}</p>
    
    <div class="row">
        <div class="col-md-4">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5>Treatment Options</h5>
                </div>
                <div class="card-body">
                    <ul>
                        {% for treatment in treatment_info.treatments %}
                        <li>{{ treatment }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5>Medications</h5>
                </div>
                <div class="card-body">
                    <ul>
                        {% for medication in treatment_info.medications %}
                        <li>{{ medication }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5>Dietary Recommendations</h5>
                </div>
                <div class="card-body">
                    <ul>
                        {% for diet in treatment_info.diet_lifestyle %}
                        <li>{{ diet }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="alert alert-warning mt-3" role="alert">
        <strong>Important:</strong> {{ treatment_info.warning }}
    </div>
</div>
{% endif %}

<div class="mt-3">
    <a href="{{ url_for('predict') }}" class="btn btn-primary">Upload Another Image</a>
</div>
{% endblock %}